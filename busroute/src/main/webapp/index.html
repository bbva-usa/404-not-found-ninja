<html>
<head>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">


	<style type="text/css">
.navbar-light .navbar-nav .active>.nav-link, .navbar-light .navbar-nav .nav-link.active,
	.navbar-light .navbar-nav .nav-link.show, .navbar-light .navbar-nav .show>.nav-link
	{
	color: white;
}

.linkText {
	font-family: 'Open Sans', sans-serif;
	font-size: 17px;
	font-weight: bold;
	cursor: pointer;
}

.navSpacer {
	font-family: 'Open Sans', sans-serif;
	font-size: 17px;
	font-weight: bold;
}

.login_btn {
	color: black;
	background-color: #FFC312;
	width: 100px;
}

.login_btn:hover {
	color: black;
	background-color: white;
}

#map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
</style>
<script>
	var map;
	function addMarker(position, map){
		  let marker = new google.maps.Marker({
      position:position,
      map: map
    });
	}

	function calculateAndDisplayRoute(directionsService, directionsRenderer, source, destination) {
  	console.log(source);
  	console.log(destination);
  	directionsRenderer.setOptions({
  		suppressMarkers: true,
  		polylineOptions: {
   		 strokeColor: 'red'
  		}
  	});
  	directionsService.route(
  	{
  	  origin: {query: source},
  	  destination: {query: destination},
  	  travelMode: 'DRIVING'
  	},
  	function(response, status) {
  	  if (status === 'OK') {
  	    directionsRenderer.setDirections(response);
  	  } else {
  	    window.alert('Directions request failed due to ' + status);
  	  }
  	});
	};

	function transformLatLng(source){
		return source.lat + ',' + source.lng;
	}

	var routes = [{"Time":"7:30 A.M.","Address":"Ave. C and 61st Street Back side of","Lat":"33.4984164","Long":"-86.8967907"},
  {"Time":"7:33 A.M.","Address":"Avenue C and Jerry D. Coleman","Lat":"33.4758812","Long":"-86.9173647"},
  {"Time":"7:35 A.M.","Address":"61st Street and Myron Massey Blvd.","Lat":"33.4769925","Long":"-86.9094935"},
  {"Time":"7:32 A.M.","Address":"60th Street and Myron Massey Blvd.","Lat":"33.4771589","Long":"-86.9093703"}];

	window.initMap = function() {
		var directionsRenders = [20]
	  var directionsService = new google.maps.DirectionsService();
	  directionsRenders[0] = new google.maps.DirectionsRenderer();
  	directionsRenders[1] = new google.maps.DirectionsRenderer();
  	directionsRenders[2] = new google.maps.DirectionsRenderer();
  	directionsRenders[3] = new google.maps.DirectionsRenderer();
  	directionsRenders[4] = new google.maps.DirectionsRenderer();
  	directionsRenders[5] = new google.maps.DirectionsRenderer();
  	
  	let center = {lat: 33.474912, lng: -86.910001};
  	let centerString = "33.474912" +','+ "-86.910001";
  	let centerString2 = "33.474952" +','+ "-86.910041";
	  map = new google.maps.Map(document.getElementById('map'), {
	    center: center,
	    zoom: 15
	  });

	  let start = center;
	  let index = 0
  	for (key in routes) {
  		addMarker({lat: parseFloat(routes[key].Lat) , lng: parseFloat(routes[key].Long)}, map);
  		calculateAndDisplayRoute(directionsService, directionsRenders[index], transformLatLng(start), transformLatLng({lat: parseFloat(routes[key].Lat) , lng: parseFloat(routes[key].Long)}));
  		start = {lat: parseFloat(routes[key].Lat) , lng: parseFloat(routes[key].Long)};
  		directionsRenders[index].setMap(map);
  		index ++;

 		};

 		//calculateAndDisplayRoute(directionsService, directionsRenderer, centerString, centerString2);
 		
 		//calculateAndDisplayRoute(directionsService, directionsRenderer, centerString, centerString2);
 		//calculateAndDisplayRoute(directionsService, directionsRenderer, {lat: 33.474912, lng: -86.910001}, {lat: 33.474932, lng: -86.910501});
 		
	}


</script>
    
</head>

<body ng-app="busRouteApp">
	<!-- nav bar -->
	<nav class="navbar navbar-expand-lg navbar-light" style="background-color: rebeccapurple;">
		<a class="navbar-brand" href="#">
			<img src="resources/images/logo.gif" size="70%" class="d-inline-block align-top" alt="">
		</a>
		<a class="navbar-brand" href="#">
			<img src="resources/images/headerTitle.png" size="70%" class="d-inline-block align-top" alt="">
		</a>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item active" >
					<a class="nav-link linkText" href="https://fairfield.cyberschool.com/">Fairfield School System</a>
				</li>
				<li class="nav-item active" >
					<a class="nav-link navSpacer">|</a>
				</li>
				<li class="nav-item active" style="padding-left: 20%, padding-right: 20%">
					<a class="nav-link linkText" href="#!/">Home</a>
				</li>
				<li class="nav-item active" >
					<a class="nav-link navSpacer">|</a>
				</li>
				<li class="nav-item active">
					<a class="nav-link linkText" href="#!/adminpage">Alerts</a>
				</li>
			</ul>
			<ul class="navbar-nav ml-auto">
				<li class="nav-item active">
					<a class="nav-link linkText" href="#!/login">Login</a>
				</li>
			</ul>
		</div>
	</nav>
	<div data-ng-view>
	</div>
	<div id="map"></div>
<script src="resources/scripts/support.js"></script>
<script sync defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmUFlJbezVKywiLO6kZE3V2nsMuNR_F8s&callback=initMap"></script>

<!--
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmUFlJbezVKywiLO6kZE3V2nsMuNR_F8s&callback=initMap">
 </script>
-->
</body>
</html>