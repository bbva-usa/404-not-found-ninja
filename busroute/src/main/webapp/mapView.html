<div class="container" ng-controller="mapViewController">
	<br><br>
<head>
<style>
	/* Set the size of the div element that contains the map */
	#map {
		height: 400px;  /* The height is 400 pixels */
		width: 100%;  /* The width is the width of the web page */
	}
</style>
</head>
 <body>
    <h3>My Google Maps Demo</h3>
<!-- test -->

<div id="map"></div>
</body>
<script type="text/javascript">
	
function initMap() {
  var directionsService = new google.maps.DirectionsService();
  var directionsRenderer = new google.maps.DirectionsRenderer();
  var myCenter =  {lat: 33.474912, lng: -86.910001};
  var routes = [{"Time":"7:30 A.M.","Address":"Ave. C and 61st Street Back side of","Lat":"33.4984164","Long":"-86.8967907"},
  {"Time":"7:33 A.M.","Address":"Avenue C and Jerry D. Coleman","Lat":"33.4758812","Long":"-86.9173647"},
  {"Time":"7:35 A.M.","Address":"61st Street and Myron Massey Blvd.","Lat":"33.4769925","Long":"-86.9094935"},
  {"Time":"7:32 A.M.","Address":"60th Street and Myron Massey Blvd.","Lat":"33.4771589","Long":"-86.9093703"}];
  // The map, centered at Uluru
  var map = new google.maps.Map(
    document.getElementById('map'), {zoom: 12, center: myCenter});

  var image = 
  'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png';

  function addMarker(position, map){
    let marker = new google.maps.Marker({
      position:position,
      icon:image,
      map: map
    });
  }

  let route = '';
  for (key in routes) {
   route.push(routes[key].Lat+ ','+ routes[key].Long);
   console.log('routes: ', route);
 }

 for(var i =0; i<route.length;i++){
   console.log('latlongs: ', route, i);
   addMarker(route[i],map);
   calculateAndDisplayRoute(directionsService, directionsRenderer, route[i],route[i+1]);
 }

 map.setZoom(17);
 map.setCenter(marker.getPosition());
 directionsRenderer.setMap(map);

}

function calculateAndDisplayRoute(directionsService, directionsRenderer, source, destination) {
  directionsService.route(
  {
    origin: {query: source},
    destination: {query: destination},
    travelMode: 'DRIVING'
  },
  function(response, status) {
    if (status === 'OK') {
      directionsRenderer.setDirections(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
</script>
</div>
